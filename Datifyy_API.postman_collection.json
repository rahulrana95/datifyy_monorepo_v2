{
  "info": {
    "name": "Datifyy API",
    "_postman_id": "datifyy-api-collection",
    "description": "Complete API collection for Datifyy dating platform with all authentication and user management endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "session_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Registration",
          "item": [
            {
              "name": "Register with Email",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken.token);",
                      "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken.token);",
                      "    pm.collectionVariables.set('user_id', jsonData.user.userId);",
                      "    pm.collectionVariables.set('session_id', jsonData.session.sessionId);",
                      "    ",
                      "    pm.test('Status code is 200', function () {",
                      "        pm.response.to.have.status(200);",
                      "    });",
                      "    ",
                      "    pm.test('Response has tokens', function () {",
                      "        pm.expect(jsonData.tokens).to.exist;",
                      "        pm.expect(jsonData.tokens.accessToken.token).to.be.a('string');",
                      "    });",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"credentials\": {\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"name\": \"John Doe\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\",\n      \"osVersion\": \"macOS 14.0\",\n      \"appVersion\": \"1.0.0\",\n      \"browser\": \"Chrome 120\",\n      \"deviceId\": \"device_12345\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RegisterWithEmail",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RegisterWithEmail"]
                },
                "description": "Register a new user with email and password. Returns user profile, authentication tokens, and session info."
              },
              "response": [
                {
                  "name": "Success Response",
                  "originalRequest": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n  \"credentials\": {\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"name\": \"John Doe\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\",\n      \"osVersion\": \"macOS 14.0\",\n      \"appVersion\": \"1.0.0\",\n      \"browser\": \"Chrome 120\",\n      \"deviceId\": \"device_12345\"\n    }\n  }\n}",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RegisterWithEmail",
                      "host": ["{{base_url}}"],
                      "path": ["datifyy.auth.v1.AuthService", "RegisterWithEmail"]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"user\": {\n    \"userId\": \"123\",\n    \"email\": \"john.doe@example.com\",\n    \"name\": \"John Doe\",\n    \"accountStatus\": \"ACCOUNT_STATUS_PENDING\",\n    \"emailVerified\": \"VERIFICATION_STATUS_UNVERIFIED\",\n    \"phoneVerified\": \"VERIFICATION_STATUS_UNVERIFIED\",\n    \"createdAt\": {\n      \"seconds\": 1700000000,\n      \"nanos\": 0\n    }\n  },\n  \"tokens\": {\n    \"accessToken\": {\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n      \"expiresAt\": {\n        \"seconds\": 1700003600,\n        \"nanos\": 0\n      },\n      \"tokenType\": \"Bearer\"\n    },\n    \"refreshToken\": {\n      \"token\": \"refresh_token_abc123...\",\n      \"expiresAt\": {\n        \"seconds\": 1702592000,\n        \"nanos\": 0\n      }\n    }\n  },\n  \"session\": {\n    \"sessionId\": \"sess_123_1700000000\",\n    \"userId\": \"123\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\",\n      \"osVersion\": \"macOS 14.0\",\n      \"appVersion\": \"1.0.0\",\n      \"browser\": \"Chrome 120\",\n      \"deviceId\": \"device_12345\"\n    },\n    \"createdAt\": {\n      \"seconds\": 1700000000,\n      \"nanos\": 0\n    },\n    \"lastActiveAt\": {\n      \"seconds\": 1700000000,\n      \"nanos\": 0\n    },\n    \"expiresAt\": {\n      \"seconds\": 1702592000,\n      \"nanos\": 0\n    },\n    \"ipAddress\": \"192.168.1.1\",\n    \"isCurrent\": true\n  },\n  \"requiresEmailVerification\": true\n}"
                }
              ]
            },
            {
              "name": "Register with Phone",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"phoneNumber\": \"+14155552671\",\n  \"name\": \"Jane Smith\",\n  \"deviceInfo\": {\n    \"platform\": \"DEVICE_PLATFORM_IOS\",\n    \"deviceName\": \"iPhone 15 Pro\",\n    \"osVersion\": \"iOS 17.1\",\n    \"appVersion\": \"1.0.0\",\n    \"deviceId\": \"device_ios_67890\",\n    \"pushToken\": \"apns_token_xyz789\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RegisterWithPhone",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RegisterWithPhone"]
                },
                "description": "Register a new user with phone number. Sends OTP for verification."
              },
              "response": [
                {
                  "name": "Success Response",
                  "originalRequest": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n  \"phoneNumber\": \"+14155552671\",\n  \"name\": \"Jane Smith\",\n  \"deviceInfo\": {\n    \"platform\": \"DEVICE_PLATFORM_IOS\",\n    \"deviceName\": \"iPhone 15 Pro\",\n    \"osVersion\": \"iOS 17.1\",\n    \"appVersion\": \"1.0.0\",\n    \"deviceId\": \"device_ios_67890\"\n  }\n}",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    },
                    "url": {
                      "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RegisterWithPhone",
                      "host": ["{{base_url}}"],
                      "path": ["datifyy.auth.v1.AuthService", "RegisterWithPhone"]
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"verification\": {\n    \"code\": \"123456\",\n    \"expiresAt\": {\n      \"seconds\": 1700000600,\n      \"nanos\": 0\n    },\n    \"type\": \"VERIFICATION_TYPE_PHONE\"\n  },\n  \"tempUserId\": \"temp_user_abc123\",\n  \"message\": \"OTP sent to +14155552671\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Login",
          "item": [
            {
              "name": "Login with Email",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken.token);",
                      "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken.token);",
                      "    pm.collectionVariables.set('user_id', jsonData.user.userId);",
                      "    pm.collectionVariables.set('session_id', jsonData.session.sessionId);",
                      "    ",
                      "    pm.test('Login successful', function () {",
                      "        pm.response.to.have.status(200);",
                      "        pm.expect(jsonData.tokens).to.exist;",
                      "    });",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"credentials\": {\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\",\n      \"osVersion\": \"macOS 14.0\",\n      \"appVersion\": \"1.0.0\",\n      \"browser\": \"Chrome 120\",\n      \"deviceId\": \"device_12345\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/LoginWithEmail",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "LoginWithEmail"]
                },
                "description": "Login with email and password"
              },
              "response": [
                {
                  "name": "Success Response",
                  "originalRequest": {
                    "method": "POST",
                    "header": [],
                    "body": {
                      "mode": "raw",
                      "raw": "{\n  \"credentials\": {\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"SecurePass123!\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\"\n    }\n  }\n}",
                      "options": {
                        "raw": {
                          "language": "json"
                        }
                      }
                    }
                  },
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"user\": {\n    \"userId\": \"123\",\n    \"email\": \"john.doe@example.com\",\n    \"name\": \"John Doe\",\n    \"accountStatus\": \"ACCOUNT_STATUS_ACTIVE\",\n    \"emailVerified\": \"VERIFICATION_STATUS_VERIFIED\",\n    \"createdAt\": {\n      \"seconds\": 1700000000,\n      \"nanos\": 0\n    },\n    \"lastLoginAt\": {\n      \"seconds\": 1700086400,\n      \"nanos\": 0\n    }\n  },\n  \"tokens\": {\n    \"accessToken\": {\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n      \"expiresAt\": {\n        \"seconds\": 1700090000,\n        \"nanos\": 0\n      },\n      \"tokenType\": \"Bearer\"\n    },\n    \"refreshToken\": {\n      \"token\": \"refresh_token_def456...\",\n      \"expiresAt\": {\n        \"seconds\": 1702678400,\n        \"nanos\": 0\n      }\n    }\n  },\n  \"session\": {\n    \"sessionId\": \"sess_123_1700086400\",\n    \"userId\": \"123\",\n    \"isCurrent\": true\n  }\n}"
                }
              ]
            },
            {
              "name": "Request Phone OTP",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"phoneNumber\": \"+14155552671\",\n  \"deviceInfo\": {\n    \"platform\": \"DEVICE_PLATFORM_ANDROID\",\n    \"deviceName\": \"Samsung Galaxy S23\",\n    \"osVersion\": \"Android 14\",\n    \"appVersion\": \"1.0.0\",\n    \"deviceId\": \"device_android_111\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RequestPhoneOTP",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RequestPhoneOTP"]
                },
                "description": "Request OTP for phone login"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"verification\": {\n    \"code\": \"987654\",\n    \"expiresAt\": {\n      \"seconds\": 1700000900,\n      \"nanos\": 0\n    },\n    \"type\": \"VERIFICATION_TYPE_PHONE\"\n  },\n  \"message\": \"OTP sent to +14155552671\"\n}"
                }
              ]
            },
            {
              "name": "Login with Phone",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken.token);",
                      "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken.token);",
                      "    pm.collectionVariables.set('user_id', jsonData.user.userId);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"credentials\": {\n    \"phoneNumber\": \"+14155552671\",\n    \"otpCode\": \"123456\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_ANDROID\",\n      \"deviceName\": \"Samsung Galaxy S23\",\n      \"osVersion\": \"Android 14\",\n      \"appVersion\": \"1.0.0\",\n      \"deviceId\": \"device_android_111\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/LoginWithPhone",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "LoginWithPhone"]
                },
                "description": "Login with phone number and OTP"
              },
              "response": []
            }
          ]
        },
        {
          "name": "Token Management",
          "item": [
            {
              "name": "Refresh Token",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    var jsonData = pm.response.json();",
                      "    pm.collectionVariables.set('access_token', jsonData.tokens.accessToken.token);",
                      "    pm.collectionVariables.set('refresh_token', jsonData.tokens.refreshToken.token);",
                      "}"
                    ],
                    "type": "text/javascript"
                  }
                }
              ],
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\",\n  \"deviceInfo\": {\n    \"platform\": \"DEVICE_PLATFORM_WEB\",\n    \"deviceName\": \"Chrome on MacBook Pro\",\n    \"deviceId\": \"device_12345\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RefreshToken",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RefreshToken"]
                },
                "description": "Refresh access token using refresh token"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"tokens\": {\n    \"accessToken\": {\n      \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.new_token...\",\n      \"expiresAt\": {\n        \"seconds\": 1700093600,\n        \"nanos\": 0\n      },\n      \"tokenType\": \"Bearer\"\n    },\n    \"refreshToken\": {\n      \"token\": \"new_refresh_token_ghi789...\",\n      \"expiresAt\": {\n        \"seconds\": 1702682000,\n        \"nanos\": 0\n      }\n    }\n  }\n}"
                }
              ]
            },
            {
              "name": "Validate Token",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"accessToken\": \"{{access_token}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ValidateToken",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ValidateToken"]
                },
                "description": "Validate access token (for internal use)"
              },
              "response": [
                {
                  "name": "Valid Token Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"valid\": true,\n  \"userId\": \"123\",\n  \"sessionId\": \"sess_123_1700086400\",\n  \"expiresAt\": {\n    \"seconds\": 1700093600,\n    \"nanos\": 0\n  }\n}"
                }
              ]
            },
            {
              "name": "Revoke Token",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RevokeToken",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RevokeToken"]
                },
                "description": "Revoke a refresh token"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"message\": \"Token revoked successfully\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Email Verification",
          "item": [
            {
              "name": "Send Email Verification",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"email\": \"john.doe@example.com\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/SendEmailVerification",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "SendEmailVerification"]
                },
                "description": "Send email verification code"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"verification\": {\n    \"code\": \"ABC123XYZ\",\n    \"expiresAt\": {\n      \"seconds\": 1700086400,\n      \"nanos\": 0\n    },\n    \"type\": \"VERIFICATION_TYPE_EMAIL\"\n  },\n  \"message\": \"Verification code sent to john.doe@example.com\"\n}"
                }
              ]
            },
            {
              "name": "Verify Email",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"verification\": {\n    \"identifier\": \"john.doe@example.com\",\n    \"code\": \"ABC123XYZ\",\n    \"type\": \"VERIFICATION_TYPE_EMAIL\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/VerifyEmail",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "VerifyEmail"]
                },
                "description": "Verify email with code"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"success\": true,\n  \"message\": \"Email verified successfully\",\n  \"user\": {\n    \"userId\": \"123\",\n    \"email\": \"john.doe@example.com\",\n    \"name\": \"John Doe\",\n    \"emailVerified\": \"VERIFICATION_STATUS_VERIFIED\"\n  }\n}"
                }
              ]
            },
            {
              "name": "Resend Verification Code",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"identifier\": \"john.doe@example.com\",\n  \"type\": \"VERIFICATION_TYPE_EMAIL\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ResendVerificationCode",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ResendVerificationCode"]
                },
                "description": "Resend verification code"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"verification\": {\n    \"code\": \"DEF456UVW\",\n    \"expiresAt\": {\n      \"seconds\": 1700088000,\n      \"nanos\": 0\n    },\n    \"type\": \"VERIFICATION_TYPE_EMAIL\"\n  },\n  \"message\": \"Verification code resent to john.doe@example.com\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Phone Verification",
          "item": [
            {
              "name": "Send Phone Verification",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"phoneNumber\": \"+14155552671\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/SendPhoneVerification",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "SendPhoneVerification"]
                },
                "description": "Send phone verification OTP"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"verification\": {\n    \"code\": \"654321\",\n    \"expiresAt\": {\n      \"seconds\": 1700001200,\n      \"nanos\": 0\n    },\n    \"type\": \"VERIFICATION_TYPE_PHONE\"\n  },\n  \"message\": \"OTP sent to +14155552671\"\n}"
                }
              ]
            },
            {
              "name": "Verify Phone",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"verification\": {\n    \"identifier\": \"+14155552671\",\n    \"code\": \"654321\",\n    \"type\": \"VERIFICATION_TYPE_PHONE\"\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/VerifyPhone",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "VerifyPhone"]
                },
                "description": "Verify phone with OTP"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"success\": true,\n  \"message\": \"Phone verified successfully\",\n  \"user\": {\n    \"userId\": \"123\",\n    \"phoneNumber\": \"+14155552671\",\n    \"phoneVerified\": \"VERIFICATION_STATUS_VERIFIED\"\n  }\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Password Management",
          "item": [
            {
              "name": "Request Password Reset",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"resetRequest\": {\n    \"email\": \"john.doe@example.com\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on Windows\",\n      \"deviceId\": \"device_win_999\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RequestPasswordReset",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RequestPasswordReset"]
                },
                "description": "Request password reset (sends reset link/code)"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"message\": \"If an account with that email exists, a password reset link has been sent\",\n  \"expiresAt\": {\n    \"seconds\": 1700003600,\n    \"nanos\": 0\n  }\n}"
                }
              ]
            },
            {
              "name": "Confirm Password Reset",
              "request": {
                "auth": {
                  "type": "noauth"
                },
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"confirmation\": {\n    \"resetToken\": \"reset_token_abc123xyz789\",\n    \"newPassword\": \"NewSecurePass456!\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on Windows\",\n      \"deviceId\": \"device_win_999\"\n    }\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ConfirmPasswordReset",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ConfirmPasswordReset"]
                },
                "description": "Confirm password reset with token"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"success\": true,\n  \"message\": \"Password reset successfully. Please login with your new password.\"\n}"
                }
              ]
            },
            {
              "name": "Change Password",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"currentPassword\": \"SecurePass123!\",\n  \"newPassword\": \"NewSecurePass789!\",\n  \"revokeOtherSessions\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ChangePassword",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ChangePassword"]
                },
                "description": "Change password (authenticated user)"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"success\": true,\n  \"message\": \"Password changed successfully\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Session Management",
          "item": [
            {
              "name": "Get Current Session",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/GetCurrentSession",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "GetCurrentSession"]
                },
                "description": "Get current session info"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"session\": {\n    \"sessionId\": \"sess_123_1700086400\",\n    \"userId\": \"123\",\n    \"deviceInfo\": {\n      \"platform\": \"DEVICE_PLATFORM_WEB\",\n      \"deviceName\": \"Chrome on MacBook Pro\",\n      \"osVersion\": \"macOS 14.0\",\n      \"deviceId\": \"device_12345\"\n    },\n    \"createdAt\": {\n      \"seconds\": 1700086400,\n      \"nanos\": 0\n    },\n    \"lastActiveAt\": {\n      \"seconds\": 1700089900,\n      \"nanos\": 0\n    },\n    \"expiresAt\": {\n      \"seconds\": 1702678400,\n      \"nanos\": 0\n    },\n    \"ipAddress\": \"192.168.1.1\",\n    \"location\": {\n      \"countryCode\": \"US\",\n      \"country\": \"United States\",\n      \"city\": \"San Francisco\"\n    },\n    \"isCurrent\": true\n  }\n}"
                }
              ]
            },
            {
              "name": "List Sessions",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"pagination\": {\n    \"page\": 1,\n    \"pageSize\": 20\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ListSessions",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ListSessions"]
                },
                "description": "List all active sessions"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"sessions\": [\n    {\n      \"sessionId\": \"sess_123_1700086400\",\n      \"userId\": \"123\",\n      \"deviceInfo\": {\n        \"platform\": \"DEVICE_PLATFORM_WEB\",\n        \"deviceName\": \"Chrome on MacBook Pro\"\n      },\n      \"lastActiveAt\": {\n        \"seconds\": 1700089900,\n        \"nanos\": 0\n      },\n      \"ipAddress\": \"192.168.1.1\",\n      \"isCurrent\": true\n    },\n    {\n      \"sessionId\": \"sess_123_1699900000\",\n      \"userId\": \"123\",\n      \"deviceInfo\": {\n        \"platform\": \"DEVICE_PLATFORM_IOS\",\n        \"deviceName\": \"iPhone 15 Pro\"\n      },\n      \"lastActiveAt\": {\n        \"seconds\": 1700080000,\n        \"nanos\": 0\n      },\n      \"ipAddress\": \"10.0.0.5\",\n      \"isCurrent\": false\n    }\n  ],\n  \"pagination\": {\n    \"page\": 1,\n    \"pageSize\": 20,\n    \"totalCount\": 2,\n    \"totalPages\": 1,\n    \"hasMore\": false\n  }\n}"
                }
              ]
            },
            {
              "name": "Revoke Session",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"sessionId\": \"sess_123_1699900000\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RevokeSession",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RevokeSession"]
                },
                "description": "Revoke a specific session"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"message\": \"Session revoked successfully\"\n}"
                }
              ]
            },
            {
              "name": "Revoke All Sessions",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RevokeAllSessions",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RevokeAllSessions"]
                },
                "description": "Revoke all sessions except current"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"revokedCount\": 3,\n  \"message\": \"3 sessions revoked successfully\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Device Management",
          "item": [
            {
              "name": "List Devices",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"pagination\": {\n    \"page\": 1,\n    \"pageSize\": 20\n  }\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/ListDevices",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "ListDevices"]
                },
                "description": "List user's devices"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"devices\": {\n    \"devices\": [\n      {\n        \"session\": {\n          \"sessionId\": \"sess_123_1700086400\",\n          \"userId\": \"123\",\n          \"deviceInfo\": {\n            \"platform\": \"DEVICE_PLATFORM_WEB\",\n            \"deviceName\": \"Chrome on MacBook Pro\",\n            \"deviceId\": \"device_12345\"\n          }\n        },\n        \"isTrusted\": true,\n        \"loginCount\": 25\n      },\n      {\n        \"session\": {\n          \"sessionId\": \"sess_123_1699900000\",\n          \"userId\": \"123\",\n          \"deviceInfo\": {\n            \"platform\": \"DEVICE_PLATFORM_IOS\",\n            \"deviceName\": \"iPhone 15 Pro\",\n            \"deviceId\": \"device_ios_67890\"\n          }\n        },\n        \"isTrusted\": true,\n        \"loginCount\": 50\n      }\n    ],\n    \"totalCount\": 2\n  },\n  \"pagination\": {\n    \"page\": 1,\n    \"pageSize\": 20,\n    \"totalCount\": 2,\n    \"totalPages\": 1,\n    \"hasMore\": false\n  }\n}"
                }
              ]
            },
            {
              "name": "Trust Device",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"deviceId\": \"device_android_111\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/TrustDevice",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "TrustDevice"]
                },
                "description": "Mark device as trusted"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"success\": true,\n  \"message\": \"Device marked as trusted\"\n}"
                }
              ]
            },
            {
              "name": "Revoke Device",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"deviceId\": \"device_android_111\"\n}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/RevokeDevice",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "RevokeDevice"]
                },
                "description": "Revoke device access"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"sessionsRevoked\": 2,\n  \"message\": \"Device revoked and 2 sessions terminated\"\n}"
                }
              ]
            }
          ]
        },
        {
          "name": "Logout",
          "item": [
            {
              "name": "Logout",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/Logout",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "Logout"]
                },
                "description": "Logout current session"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"message\": \"Logged out successfully\"\n}"
                }
              ]
            },
            {
              "name": "Logout All",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{}"
                },
                "url": {
                  "raw": "{{base_url}}/datifyy.auth.v1.AuthService/LogoutAll",
                  "host": ["{{base_url}}"],
                  "path": ["datifyy.auth.v1.AuthService", "LogoutAll"]
                },
                "description": "Logout from all devices"
              },
              "response": [
                {
                  "name": "Success Response",
                  "status": "OK",
                  "code": 200,
                  "_postman_previewlanguage": "json",
                  "header": [
                    {
                      "key": "Content-Type",
                      "value": "application/json"
                    }
                  ],
                  "cookie": [],
                  "body": "{\n  \"sessionsLoggedOut\": 4,\n  \"message\": \"Logged out from 4 sessions\"\n}"
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Pre-request script to add Authorization header if access_token exists",
          "const accessToken = pm.collectionVariables.get('access_token');",
          "",
          "if (accessToken && accessToken !== '') {",
          "    pm.request.headers.add({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + accessToken",
          "    });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script for common validations",
          "pm.test('Response time is less than 2000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(2000);",
          "});",
          "",
          "pm.test('Content-Type is application/json', function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});"
        ]
      }
    }
  ]
}
